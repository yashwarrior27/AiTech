$(document).ready((function(){const{ethereum:e}=window;$("#package option").each((function(){$(this).val(btoa($(this).val()))}));const t=window.location.origin,n="0x38",a="Smart Chain",i="0x09acDc19F6544F2fF3af799A60A0BE13868B8071",s=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"tariff",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"DepositAt",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"tokenChangedAddress",type:"address"}],name:"TokenAddressChaged",type:"event"},{inputs:[],name:"MIN_DEPOSIT_BUSD",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"MIN_DEPOSIT_USDT",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"busdAmount",type:"uint256"}],name:"buyTokenWithBUSD",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"usdtAmount",type:"uint256"}],name:"buyTokenWithUSDT",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"contractAddr",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"investors",outputs:[{internalType:"bool",name:"registered",type:"bool"},{internalType:"uint256",name:"invested",type:"uint256"},{internalType:"uint256",name:"paidAt",type:"uint256"},{internalType:"uint256",name:"withdrawn",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"priceOfBNB",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_busdAmt",type:"uint256"}],name:"setMinBusd",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tariffs",outputs:[{internalType:"uint256",name:"time",type:"uint256"},{internalType:"uint256",name:"percent",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"tokenInBNB",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"tokenInBUSD",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"tokenPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"tokenPriceDecimal",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalInvested",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address payable",name:"_to",type:"address"},{internalType:"address",name:"_token",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"withdrawalToAddress",outputs:[],stateMutability:"nonpayable",type:"function"}],r="0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56",o=[{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{constant:!0,inputs:[],name:"_decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"_name",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"_symbol",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getOwner",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"renounceOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}],p="0x55d398326f99059fF775485246999027B3197955",u=[{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{constant:!0,inputs:[],name:"_decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"_name",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"_symbol",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getOwner",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"renounceOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}];var l=null,y=null,d=new Web3(e);setInterval((async()=>{let n=localStorage.address.toLowerCase();if(n){n!=(await e.request({method:"eth_requestAccounts"}))[0].toLowerCase()&&$.get(t+"/api/logout").then((e=>{if(e.success)return toastr.success(e.message),localStorage.clear(),setTimeout((()=>location.reload()),700)})).catch((e=>toastr.error(e.message)))}}),1e3),$("#logout").on("click",(function(){$.get(t+"/api/logout").then((e=>{if(e.success)return toastr.success(e.message),localStorage.clear(),setTimeout((()=>window.location.replace(t)),700)})).catch((e=>toastr.error(e.message)))})),$("#Token,#package").on("change",(async t=>{let i=$("#Token").val();if(!i)return!1;let[s,r]=atob($("#package").val()).split("-");if(i){if(e.chainId!=n)return await e.request({method:"wallet_switchEthereumChain",params:[{chainId:n}]}).then((()=>toastr.success(`Network switched to ${a}.`,"Success"))).catch((e=>{toastr.error(`Please switching to ${a} network.`,"Failed")})),setTimeout((()=>location.reload()),1e3);let t=await e.request({method:"eth_requestAccounts"});return y=t[0].toLowerCase(),await c(y,i,r)}}));const c=async(e,t,n)=>(l=1==t?new d.eth.Contract(u,p):new d.eth.Contract(o,r),await l.methods.allowance(e,i).call({from:e},(function(e,t){if(null!=e)return toastr.error("Something went wrong. Please try again later.");Number(t.slice(0,-18))<Number(n)?($("#package-buy").addClass("d-none"),$("#approved-allowence").removeClass("d-none")):($("#package-buy").removeClass("d-none"),$("#approved-allowence").addClass("d-none"))})));$("#approved-allowence").on("click",(async e=>{e.preventDefault();let t=$("#approved-allowence");t.attr("disabled",!0);let n=$("#Token").val(),[a,s]=atob($("#package").val()).split("-");if(1==n)l=new d.eth.Contract(u,p);else{if(2!=n)return t.attr("disabled",!1),toastr.error("Please select the currency");l=new d.eth.Contract(o,r)}var c=s+"000000000000000000";l.methods.approve(i,c).send({from:y},((e,n)=>null!=e?(t.attr("disabled",!1),toastr.error("Transection is cancelled.","Rejected")):n?($("#approved-allowence").attr("disabled",!0),toastr.success("Please wait 10 seconds to Approved","Transection Success."),setTimeout((()=>location.reload()),1e4)):void 0))})),$("#package-purchase").on("submit",(async t=>{t.preventDefault();let r=$("#package-buy");if(r.attr("disabled",!0),"0"==sessionStorage.package_status)return localStorage.address="not allowed",toastr.error("Please do not break the security.");let o=$("#package-purchase").serializeArray(),p={};for(let e of o){if(!e.value)return r.attr("disabled",!1),toastr.error(`Please select the ${e.name}.`);p[e.name]=e.value}let[u,l]=atob(p.package).split("-");if(p.package=u,e.chainId!=n)return r.attr("disabled",!1),await e.request({method:"wallet_switchEthereumChain",params:[{chainId:n}]}).then((()=>toastr.success(`Network switched to ${a}.`,"Success"))).catch((e=>{toastr.error(`Please switching to ${a} network.`,"Failed")}));let f=await e.request({method:"eth_requestAccounts"});y=f[0].toLowerCase();let h=await c(y,p.currency,l);if(Number(h.slice(0,-18))<Number(l))return toastr.error("Please first give approval.","Need Approval");if((await T()).success)return toastr.info("Please wait.","Transection Confirming...");let v=new d.eth.Contract(s,i);return 1==p.currency?await v.methods.buyTokenWithUSDT(l+"000000000000000000").send({from:y},(function(e,t){null==e&&m(p.package,p.currency,t)})).then((e=>b(e))).catch((e=>{if(r.attr("disabled",!1),4001==e.code)return toastr.error("Transection is cancelled.","Rejected");w(e)})):await v.methods.buyTokenWithBUSD(l+"000000000000000000").send({from:y},(function(e,t){null==e&&m(p.package,p.currency,t)})).then((e=>b(e))).catch((e=>{if(r.attr("disabled",!1),4001==e.code)return toastr.error("Transection is cancelled.","Rejected");w(e)}))}));const m=(e,n,a)=>$.post({url:t+"/api/create-meta-trans",data:{package:e,currency:n,transection_id:a}}).then((e=>{e.success&&(toastr.info("Please wait.","Transection Confirming..."),$("#package-buy").attr("disabled",!0),localStorage.setItem("tid",btoa(e.data.trans_id)))})),b=(e=null)=>$.post({url:t+"/api/success-meta-trans",data:{trans_id:atob(localStorage.getItem("tid")),response:e}}).then((e=>e.success?(toastr.success("Transection successfully confirmed.","Transection Confirmed"),localStorage.removeItem("tid"),setTimeout((()=>location.reload()),1e3)):(toastr.error("Transection Failed.","Failed"),localStorage.removeItem("tid"),setTimeout((()=>location.reload()),1e3)))),w=(e=null)=>$.post({url:t+"/api/fail-meta-trans",data:{trans_id:atob(localStorage.getItem("tid")),response:e}}).then((e=>{e.success&&(localStorage.removeItem("tid"),toastr.error("Transection is failed.","Failed"))})),T=async()=>{let e=null;return await $.get(t+"/api/check-meta-trans").then((t=>e=t)),e},f=setInterval((async()=>{let e=await T();if(e.success){let{data:{transection_id:i,trans_id:s}}=e;localStorage.removeItem("tid");var n=new Web3(new Web3.providers.HttpProvider("https://bsc-dataseed.binance.org/")),a=await n.eth.getTransactionReceipt(i);return $.post({url:t+"/api/update-meta-trans",data:{status:a.status,response:a,trans_id:s}}).then((e=>{"failed"==e.message?toastr.error("Transection failed.","Failed"):toastr.success("Transection successful.","Success"),setTimeout((()=>location.reload()),700)})).catch((e=>toastr.error("Something went wrong.")))}clearInterval(f)}),5e3);$("#withdrawal").on("click",(async function(){var e=atob(sessionStorage.getItem("amt"));return Number(e)<20?($("#withdrawal").attr("disabled",!0),toastr.error("Minimum 20$ required.","Insufficient balance")):(await h()).success?($("#withdrawal").attr("disabled",!0),toastr.info("Please wait while confirming the pending request.","withdrawal Confirming...")):void $("#withdrawalmodal").modal("show")})),$("#wdamt").keyup((function(e){var t=""+Number($(this).val()),n=Number(atob(sessionStorage.getItem("amt")));if(/^\d+\.\d+$/.test(t)&&t.split(".")[1].length>4){var a=t.slice(0,t.indexOf(".")+5);$(this).val(a)}t?isNaN(t)?($("#wd-amt-err").html("Please enter numeric value."),$("#wd-sbt").attr("disabled",!0)):t<20?($("#wd-amt-err").html("Minimum 20$ required."),$("#wd-sbt").attr("disabled",!0)):n<t?($("#wd-amt-err").html("Insufficient balance."),$("#wd-sbt").attr("disabled",!0)):($("#wd-amt-err").html(""),$("#wd-sbt").attr("disabled",!1)):($("#wd-amt-err").html("This field is required."),$("#wd-sbt").attr("disabled",!0))})),$("#wdt").on("submit",(function(e){e.preventDefault();let n=$("#wd-sbt");n.attr("disabled",!0),$("#wdt").unbind("submit"),$("#withdrawalmodal").modal("hide");var a=$(this).serializeArray(),i=Number(a[0].value),s=Number(atob(sessionStorage.getItem("amt")));return i<20||i>s?(localStorage.address="not allowed",toastr.error("Please do not break the security.")):(toastr.info("Please wait.","Transection Confirming..."),$.post({url:t+"/api/withdrawal-request",data:{amount:i}}).then((e=>{if(e.success)return toastr.success("Add withdrawal Request."),setTimeout((()=>location.reload()),700)})).catch((e=>{toastr.error(e.responseJSON.message),n.attr("disabled",!1)})))}));const h=async()=>{let e=null;return await $.get(t+"/api/check-withdrawal").then((t=>e=t)),e}}));